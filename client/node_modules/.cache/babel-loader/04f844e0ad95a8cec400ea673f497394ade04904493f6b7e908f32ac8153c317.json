{"ast":null,"code":"var _jsxFileName = \"/Users/ofir/dev/Trip/client/src/components/RouteMap.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix for default markers in Leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\nconst RouteMap = ({\n  routeData,\n  center = [40.7128, -74.0060],\n  zoom = 10,\n  height = '400px',\n  showMarkers = true,\n  showRoute = true\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  useEffect(() => {\n    if (!mapRef.current) return;\n\n    // Initialize map\n    const map = L.map(mapRef.current).setView(center, zoom);\n\n    // Add tile layer\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '© OpenStreetMap contributors'\n    }).addTo(map);\n    mapInstanceRef.current = map;\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n      }\n    };\n  }, [center, zoom]);\n  useEffect(() => {\n    if (!mapInstanceRef.current || !routeData) return;\n    const map = mapInstanceRef.current;\n\n    // Clear existing layers\n    map.eachLayer(layer => {\n      if (layer instanceof L.Marker || layer instanceof L.Polyline) {\n        map.removeLayer(layer);\n      }\n    });\n\n    // Draw route if routeData is provided\n    if (showRoute && routeData && routeData.points && routeData.points.length > 0) {\n      // Group points by day\n      const dailyRoutes = {};\n      routeData.points.forEach(point => {\n        if (!dailyRoutes[point.day]) {\n          dailyRoutes[point.day] = [];\n        }\n        dailyRoutes[point.day].push([point.lat, point.lng]);\n      });\n\n      // Draw route for each day with different colors\n      const colors = ['#3B82F6', '#EF4444', '#10B981', '#F59E0B', '#8B5CF6'];\n      Object.keys(dailyRoutes).forEach((day, index) => {\n        const points = dailyRoutes[day];\n        const color = colors[index % colors.length];\n\n        // Draw route line\n        const routeLine = L.polyline(points, {\n          color: color,\n          weight: 4,\n          opacity: 0.8\n        }).addTo(map);\n\n        // Add start and end markers\n        if (showMarkers && points.length > 0) {\n          // Start marker\n          L.marker(points[0]).addTo(map).bindPopup(`Day ${day} - Start`).openPopup();\n\n          // End marker\n          if (points.length > 1) {\n            L.marker(points[points.length - 1]).addTo(map).bindPopup(`Day ${day} - End`);\n          }\n        }\n\n        // Fit map to show all routes\n        map.fitBounds(routeLine.getBounds(), {\n          padding: [20, 20]\n        });\n      });\n    }\n\n    // If no route data, just show a marker at center\n    if (!routeData && showMarkers) {\n      L.marker(center).addTo(map).bindPopup('Location').openPopup();\n    }\n  }, [routeData, showMarkers, showRoute, center]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    style: {\n      height,\n      width: '100%'\n    },\n    className: \"rounded-lg overflow-hidden\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n_s(RouteMap, \"5U3tBeyuxoaciEisNJbl9JPbwXc=\");\n_c = RouteMap;\nexport default RouteMap;\nvar _c;\n$RefreshReg$(_c, \"RouteMap\");","map":{"version":3,"names":["React","useEffect","useRef","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","RouteMap","routeData","center","zoom","height","showMarkers","showRoute","_s","mapRef","mapInstanceRef","current","map","setView","tileLayer","attribution","addTo","remove","eachLayer","layer","Marker","Polyline","removeLayer","points","length","dailyRoutes","forEach","point","day","push","lat","lng","colors","Object","keys","index","color","routeLine","polyline","weight","opacity","marker","bindPopup","openPopup","fitBounds","getBounds","padding","ref","style","width","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ofir/dev/Trip/client/src/components/RouteMap.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix for default markers in Leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n});\n\nconst RouteMap = ({ \n  routeData, \n  center = [40.7128, -74.0060], \n  zoom = 10, \n  height = '400px',\n  showMarkers = true,\n  showRoute = true \n}) => {\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n\n  useEffect(() => {\n    if (!mapRef.current) return;\n\n    // Initialize map\n    const map = L.map(mapRef.current).setView(center, zoom);\n\n    // Add tile layer\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '© OpenStreetMap contributors'\n    }).addTo(map);\n\n    mapInstanceRef.current = map;\n\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n      }\n    };\n  }, [center, zoom]);\n\n  useEffect(() => {\n    if (!mapInstanceRef.current || !routeData) return;\n\n    const map = mapInstanceRef.current;\n    \n    // Clear existing layers\n    map.eachLayer((layer) => {\n      if (layer instanceof L.Marker || layer instanceof L.Polyline) {\n        map.removeLayer(layer);\n      }\n    });\n\n    // Draw route if routeData is provided\n    if (showRoute && routeData && routeData.points && routeData.points.length > 0) {\n      // Group points by day\n      const dailyRoutes = {};\n      routeData.points.forEach(point => {\n        if (!dailyRoutes[point.day]) {\n          dailyRoutes[point.day] = [];\n        }\n        dailyRoutes[point.day].push([point.lat, point.lng]);\n      });\n\n      // Draw route for each day with different colors\n      const colors = ['#3B82F6', '#EF4444', '#10B981', '#F59E0B', '#8B5CF6'];\n      \n      Object.keys(dailyRoutes).forEach((day, index) => {\n        const points = dailyRoutes[day];\n        const color = colors[index % colors.length];\n        \n        // Draw route line\n        const routeLine = L.polyline(points, {\n          color: color,\n          weight: 4,\n          opacity: 0.8\n        }).addTo(map);\n\n        // Add start and end markers\n        if (showMarkers && points.length > 0) {\n          // Start marker\n          L.marker(points[0]).addTo(map)\n            .bindPopup(`Day ${day} - Start`)\n            .openPopup();\n\n          // End marker\n          if (points.length > 1) {\n            L.marker(points[points.length - 1]).addTo(map)\n              .bindPopup(`Day ${day} - End`);\n          }\n        }\n\n        // Fit map to show all routes\n        map.fitBounds(routeLine.getBounds(), { padding: [20, 20] });\n      });\n    }\n\n    // If no route data, just show a marker at center\n    if (!routeData && showMarkers) {\n      L.marker(center).addTo(map)\n        .bindPopup('Location')\n        .openPopup();\n    }\n\n  }, [routeData, showMarkers, showRoute, center]);\n\n  return (\n    <div \n      ref={mapRef} \n      style={{ height, width: '100%' }}\n      className=\"rounded-lg overflow-hidden\"\n    />\n  );\n};\n\nexport default RouteMap; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,0BAA0B;;AAEjC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,OAAOF,CAAC,CAACG,IAAI,CAACC,OAAO,CAACC,SAAS,CAACC,WAAW;AAC3CN,CAAC,CAACG,IAAI,CAACC,OAAO,CAACG,YAAY,CAAC;EAC1BC,aAAa,EAAE,gFAAgF;EAC/FC,OAAO,EAAE,6EAA6E;EACtFC,SAAS,EAAE;AACb,CAAC,CAAC;AAEF,MAAMC,QAAQ,GAAGA,CAAC;EAChBC,SAAS;EACTC,MAAM,GAAG,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC;EAC5BC,IAAI,GAAG,EAAE;EACTC,MAAM,GAAG,OAAO;EAChBC,WAAW,GAAG,IAAI;EAClBC,SAAS,GAAG;AACd,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAMC,MAAM,GAAGpB,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAMqB,cAAc,GAAGrB,MAAM,CAAC,IAAI,CAAC;EAEnCD,SAAS,CAAC,MAAM;IACd,IAAI,CAACqB,MAAM,CAACE,OAAO,EAAE;;IAErB;IACA,MAAMC,GAAG,GAAGtB,CAAC,CAACsB,GAAG,CAACH,MAAM,CAACE,OAAO,CAAC,CAACE,OAAO,CAACV,MAAM,EAAEC,IAAI,CAAC;;IAEvD;IACAd,CAAC,CAACwB,SAAS,CAAC,oDAAoD,EAAE;MAChEC,WAAW,EAAE;IACf,CAAC,CAAC,CAACC,KAAK,CAACJ,GAAG,CAAC;IAEbF,cAAc,CAACC,OAAO,GAAGC,GAAG;IAE5B,OAAO,MAAM;MACX,IAAIF,cAAc,CAACC,OAAO,EAAE;QAC1BD,cAAc,CAACC,OAAO,CAACM,MAAM,CAAC,CAAC;MACjC;IACF,CAAC;EACH,CAAC,EAAE,CAACd,MAAM,EAAEC,IAAI,CAAC,CAAC;EAElBhB,SAAS,CAAC,MAAM;IACd,IAAI,CAACsB,cAAc,CAACC,OAAO,IAAI,CAACT,SAAS,EAAE;IAE3C,MAAMU,GAAG,GAAGF,cAAc,CAACC,OAAO;;IAElC;IACAC,GAAG,CAACM,SAAS,CAAEC,KAAK,IAAK;MACvB,IAAIA,KAAK,YAAY7B,CAAC,CAAC8B,MAAM,IAAID,KAAK,YAAY7B,CAAC,CAAC+B,QAAQ,EAAE;QAC5DT,GAAG,CAACU,WAAW,CAACH,KAAK,CAAC;MACxB;IACF,CAAC,CAAC;;IAEF;IACA,IAAIZ,SAAS,IAAIL,SAAS,IAAIA,SAAS,CAACqB,MAAM,IAAIrB,SAAS,CAACqB,MAAM,CAACC,MAAM,GAAG,CAAC,EAAE;MAC7E;MACA,MAAMC,WAAW,GAAG,CAAC,CAAC;MACtBvB,SAAS,CAACqB,MAAM,CAACG,OAAO,CAACC,KAAK,IAAI;QAChC,IAAI,CAACF,WAAW,CAACE,KAAK,CAACC,GAAG,CAAC,EAAE;UAC3BH,WAAW,CAACE,KAAK,CAACC,GAAG,CAAC,GAAG,EAAE;QAC7B;QACAH,WAAW,CAACE,KAAK,CAACC,GAAG,CAAC,CAACC,IAAI,CAAC,CAACF,KAAK,CAACG,GAAG,EAAEH,KAAK,CAACI,GAAG,CAAC,CAAC;MACrD,CAAC,CAAC;;MAEF;MACA,MAAMC,MAAM,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;MAEtEC,MAAM,CAACC,IAAI,CAACT,WAAW,CAAC,CAACC,OAAO,CAAC,CAACE,GAAG,EAAEO,KAAK,KAAK;QAC/C,MAAMZ,MAAM,GAAGE,WAAW,CAACG,GAAG,CAAC;QAC/B,MAAMQ,KAAK,GAAGJ,MAAM,CAACG,KAAK,GAAGH,MAAM,CAACR,MAAM,CAAC;;QAE3C;QACA,MAAMa,SAAS,GAAG/C,CAAC,CAACgD,QAAQ,CAACf,MAAM,EAAE;UACnCa,KAAK,EAAEA,KAAK;UACZG,MAAM,EAAE,CAAC;UACTC,OAAO,EAAE;QACX,CAAC,CAAC,CAACxB,KAAK,CAACJ,GAAG,CAAC;;QAEb;QACA,IAAIN,WAAW,IAAIiB,MAAM,CAACC,MAAM,GAAG,CAAC,EAAE;UACpC;UACAlC,CAAC,CAACmD,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,CAAC,CAACP,KAAK,CAACJ,GAAG,CAAC,CAC3B8B,SAAS,CAAC,OAAOd,GAAG,UAAU,CAAC,CAC/Be,SAAS,CAAC,CAAC;;UAEd;UACA,IAAIpB,MAAM,CAACC,MAAM,GAAG,CAAC,EAAE;YACrBlC,CAAC,CAACmD,MAAM,CAAClB,MAAM,CAACA,MAAM,CAACC,MAAM,GAAG,CAAC,CAAC,CAAC,CAACR,KAAK,CAACJ,GAAG,CAAC,CAC3C8B,SAAS,CAAC,OAAOd,GAAG,QAAQ,CAAC;UAClC;QACF;;QAEA;QACAhB,GAAG,CAACgC,SAAS,CAACP,SAAS,CAACQ,SAAS,CAAC,CAAC,EAAE;UAAEC,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE;QAAE,CAAC,CAAC;MAC7D,CAAC,CAAC;IACJ;;IAEA;IACA,IAAI,CAAC5C,SAAS,IAAII,WAAW,EAAE;MAC7BhB,CAAC,CAACmD,MAAM,CAACtC,MAAM,CAAC,CAACa,KAAK,CAACJ,GAAG,CAAC,CACxB8B,SAAS,CAAC,UAAU,CAAC,CACrBC,SAAS,CAAC,CAAC;IAChB;EAEF,CAAC,EAAE,CAACzC,SAAS,EAAEI,WAAW,EAAEC,SAAS,EAAEJ,MAAM,CAAC,CAAC;EAE/C,oBACEX,OAAA;IACEuD,GAAG,EAAEtC,MAAO;IACZuC,KAAK,EAAE;MAAE3C,MAAM;MAAE4C,KAAK,EAAE;IAAO,CAAE;IACjCC,SAAS,EAAC;EAA4B;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACvC,CAAC;AAEN,CAAC;AAAC9C,EAAA,CAvGIP,QAAQ;AAAAsD,EAAA,GAARtD,QAAQ;AAyGd,eAAeA,QAAQ;AAAC,IAAAsD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}