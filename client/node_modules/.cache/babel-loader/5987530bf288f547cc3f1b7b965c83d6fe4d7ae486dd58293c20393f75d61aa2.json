{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gal\\\\Desktop\\\\Trip\\\\Trip\\\\client\\\\src\\\\components\\\\RouteMap.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix for default markers in Leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\nconst RouteMap = ({\n  routeData,\n  center = [40.7128, -74.0060],\n  zoom = 10,\n  height = '400px',\n  showMarkers = true,\n  showRoute = true\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const overlayRef = useRef(null);\n  useEffect(() => {\n    if (!mapRef.current) return;\n\n    // Ensure the container has proper dimensions\n    const container = mapRef.current;\n    if (container.offsetHeight === 0) {\n      container.style.height = height;\n    }\n\n    // Initialize map with error handling\n    try {\n      const map = L.map(container, {\n        center: center,\n        zoom: zoom,\n        zoomControl: true,\n        scrollWheelZoom: true\n      });\n\n      // Add tile layer\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '© OpenStreetMap contributors',\n        maxZoom: 18\n      }).addTo(map);\n      mapInstanceRef.current = map;\n\n      // Force a resize after initialization\n      setTimeout(() => {\n        if (mapInstanceRef.current) {\n          mapInstanceRef.current.invalidateSize();\n        }\n      }, 100);\n      return () => {\n        if (mapInstanceRef.current) {\n          mapInstanceRef.current.remove();\n          mapInstanceRef.current = null;\n        }\n      };\n    } catch (error) {\n      console.error('Error initializing map:', error);\n    }\n  }, [center, zoom, height]);\n  useEffect(() => {\n    if (!mapInstanceRef.current) return;\n    const map = mapInstanceRef.current;\n    try {\n      // ננקה רק שכבות ציור קודמות שלנו (geojson/polylines/markers) – נשמור אותן בקבוצה אחת\n      if (overlayRef.current) {\n        map.removeLayer(overlayRef.current);\n        overlayRef.current = null;\n      }\n      overlayRef.current = L.layerGroup().addTo(map);\n\n      // אם אין Route – נשאיר סמן במרכז (כמו שהיה)\n      if (!routeData) {\n        if (showMarkers) {\n          L.marker(center).addTo(overlayRef.current).bindPopup('Location').openPopup();\n        }\n        return;\n      }\n\n      // Draw route if routeData is provided\n      if (showRoute && routeData) {\n        // --- עדיפות: אם יש dailyRoutes – מציירים כל יום בנפרד ---\n        if (Array.isArray(routeData.dailyRoutes) && routeData.dailyRoutes.length > 0) {\n          const colors = ['#3B82F6', '#EF4444', '#10B981', '#F59E0B'];\n          let allBounds = null;\n          routeData.dailyRoutes.forEach((dayRoute, idx) => {\n            var _dayRoute$day, _dayRoute$day2, _dayRoute$day3;\n            // מקור הנקודות: או dayRoute.points או פילטר לפי day מ-routeData.points\n            const dayPoints = dayRoute.points && dayRoute.points.length ? dayRoute.points : (routeData.points || []).filter(p => p.day === dayRoute.day);\n            if (!dayPoints || dayPoints.length === 0) return;\n            const latlngs = dayPoints.map(p => [p.lat, p.lng]);\n\n            // קו למסלול היומי\n            const line = L.polyline(latlngs, {\n              color: colors[idx % colors.length],\n              weight: 4,\n              opacity: 0.9\n            }).addTo(overlayRef.current);\n\n            // סימון התחלה/סיום לכל יום – לפי הבקשה \"Start 1/2\"\n            // תיוג לפי היום האמיתי, ופתיחת popup ל-Start של יום 1\n            const startLabel = `Start ${(_dayRoute$day = dayRoute.day) !== null && _dayRoute$day !== void 0 ? _dayRoute$day : idx + 1}`;\n            const endLabel = `End ${(_dayRoute$day2 = dayRoute.day) !== null && _dayRoute$day2 !== void 0 ? _dayRoute$day2 : idx + 1}`;\n            const startMarker = L.marker(latlngs[0], {\n              zIndexOffset: 1000\n            }).addTo(overlayRef.current).bindPopup(startLabel);\n\n            // פותחים את ה-popup של יום 1 כדי לוודא שרואים אותו\n            if (((_dayRoute$day3 = dayRoute.day) !== null && _dayRoute$day3 !== void 0 ? _dayRoute$day3 : idx + 1) === 1) {\n              startMarker.openPopup();\n            }\n\n            // אם יש חפיפה עם סוף יום אחר, נזיז טיפה את ה-End כדי שלא יכסה\n            function nudge([lat, lng], eastM = 6, northM = -6) {\n              const mPerDegLat = 111320;\n              const mPerDegLng = 111320 * Math.cos(lat * Math.PI / 180);\n              return [lat + northM / mPerDegLat, lng + eastM / mPerDegLng];\n            }\n            if (latlngs.length > 1) {\n              const endPos = nudge(latlngs[latlngs.length - 1], 6, -6); // הזזה קלה\n              L.marker(endPos, {\n                zIndexOffset: 900\n              }).addTo(overlayRef.current).bindPopup(endLabel);\n            }\n\n            // איסוף גבולות לכל הימים\n            const b = line.getBounds();\n            allBounds = allBounds ? allBounds.extend(b) : b;\n          });\n          if (allBounds) {\n            map.fitBounds(allBounds, {\n              padding: [20, 20]\n            });\n          }\n          return; // סיימנו ציור לפי ימים\n        }\n\n        // --- אם אין dailyRoutes אבל יש geometry – מציירים GeoJSON (קו יחיד) ---\n        if (routeData.geometry) {\n          const geoLayer = L.geoJSON(routeData.geometry, {\n            style: {\n              weight: 4,\n              opacity: 0.9\n            }\n          }).addTo(overlayRef.current);\n          if (showMarkers && routeData.geometry.type === 'LineString' && Array.isArray(routeData.geometry.coordinates)) {\n            const c = routeData.geometry.coordinates;\n            if (c.length) {\n              L.marker([c[0][1], c[0][0]]).addTo(overlayRef.current).bindPopup('Start');\n              if (c.length > 1) {\n                L.marker([c[c.length - 1][1], c[c.length - 1][0]]).addTo(overlayRef.current).bindPopup('End');\n              }\n            }\n          }\n          map.fitBounds(geoLayer.getBounds(), {\n            padding: [20, 20]\n          });\n          return;\n        }\n\n        // --- fallback: ציור לפי points מקובצים לפי day ---\n        if (routeData.points && routeData.points.length > 0) {\n          const byDay = {};\n          routeData.points.forEach(p => {\n            (byDay[p.day] ||= []).push([p.lat, p.lng]);\n          });\n          const colors = ['#3B82F6', '#EF4444', '#10B981', '#F59E0B'];\n          let allBounds = null;\n          Object.keys(byDay).forEach((day, i) => {\n            const line = L.polyline(byDay[day], {\n              color: colors[i % colors.length],\n              weight: 4,\n              opacity: 0.9\n            }).addTo(overlayRef.current);\n            L.marker(byDay[day][0]).addTo(overlayRef.current).bindPopup(`Start ${i + 1}`);\n            if (byDay[day].length > 1) {\n              L.marker(byDay[day][byDay[day].length - 1]).addTo(overlayRef.current).bindPopup(`End ${i + 1}`);\n            }\n            const b = line.getBounds();\n            allBounds = allBounds ? allBounds.extend(b) : b;\n          });\n          if (allBounds) map.fitBounds(allBounds, {\n            padding: [20, 20]\n          });\n          return;\n        }\n      }\n\n      // אם אין routeData.points או showRoute=false – רק סמן במרכז\n      if (showMarkers) {\n        L.marker(center).addTo(overlayRef.current).bindPopup('Location').openPopup();\n      }\n    } catch (error) {\n      console.error('Error updating map:', error);\n    }\n  }, [routeData, showMarkers, showRoute, center]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    style: {\n      height,\n      width: '100%',\n      minHeight: '200px'\n    },\n    className: \"rounded-lg overflow-hidden\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, this);\n};\n_s(RouteMap, \"D0jinjhCC73672gKdJU6q7snqMI=\");\n_c = RouteMap;\nexport default RouteMap;\nvar _c;\n$RefreshReg$(_c, \"RouteMap\");","map":{"version":3,"names":["React","useEffect","useRef","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","RouteMap","routeData","center","zoom","height","showMarkers","showRoute","_s","mapRef","mapInstanceRef","overlayRef","current","container","offsetHeight","style","map","zoomControl","scrollWheelZoom","tileLayer","attribution","maxZoom","addTo","setTimeout","invalidateSize","remove","error","console","removeLayer","layerGroup","marker","bindPopup","openPopup","Array","isArray","dailyRoutes","length","colors","allBounds","forEach","dayRoute","idx","_dayRoute$day","_dayRoute$day2","_dayRoute$day3","dayPoints","points","filter","p","day","latlngs","lat","lng","line","polyline","color","weight","opacity","startLabel","endLabel","startMarker","zIndexOffset","nudge","eastM","northM","mPerDegLat","mPerDegLng","Math","cos","PI","endPos","b","getBounds","extend","fitBounds","padding","geometry","geoLayer","geoJSON","type","coordinates","c","byDay","push","Object","keys","i","ref","width","minHeight","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Gal/Desktop/Trip/Trip/client/src/components/RouteMap.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix for default markers in Leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n});\n\nconst RouteMap = ({ \n  routeData, \n  center = [40.7128, -74.0060], \n  zoom = 10, \n  height = '400px',\n  showMarkers = true,\n  showRoute = true \n}) => {\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const overlayRef = useRef(null);\n\n  useEffect(() => {\n    if (!mapRef.current) return;\n\n    // Ensure the container has proper dimensions\n    const container = mapRef.current;\n    if (container.offsetHeight === 0) {\n      container.style.height = height;\n    }\n\n    // Initialize map with error handling\n    try {\n      const map = L.map(container, {\n        center: center,\n        zoom: zoom,\n        zoomControl: true,\n        scrollWheelZoom: true\n      });\n\n      // Add tile layer\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '© OpenStreetMap contributors',\n        maxZoom: 18\n      }).addTo(map);\n\n      mapInstanceRef.current = map;\n\n      // Force a resize after initialization\n      setTimeout(() => {\n        if (mapInstanceRef.current) {\n          mapInstanceRef.current.invalidateSize();\n        }\n      }, 100);\n\n      return () => {\n        if (mapInstanceRef.current) {\n          mapInstanceRef.current.remove();\n          mapInstanceRef.current = null;\n        }\n      };\n    } catch (error) {\n      console.error('Error initializing map:', error);\n    }\n  }, [center, zoom, height]);\n\n  useEffect(() => {\n    if (!mapInstanceRef.current) return;\n  \n    const map = mapInstanceRef.current;\n  \n    try {\n      // ננקה רק שכבות ציור קודמות שלנו (geojson/polylines/markers) – נשמור אותן בקבוצה אחת\n      if (overlayRef.current) {\n        map.removeLayer(overlayRef.current);\n        overlayRef.current = null;\n      }\n      overlayRef.current = L.layerGroup().addTo(map);\n  \n      // אם אין Route – נשאיר סמן במרכז (כמו שהיה)\n      if (!routeData) {\n        if (showMarkers) {\n          L.marker(center).addTo(overlayRef.current)\n            .bindPopup('Location')\n            .openPopup();\n        }\n        return;\n      }\n  \n    // Draw route if routeData is provided\n    if (showRoute && routeData) {\n      // --- עדיפות: אם יש dailyRoutes – מציירים כל יום בנפרד ---\n      if (Array.isArray(routeData.dailyRoutes) && routeData.dailyRoutes.length > 0) {\n        const colors = ['#3B82F6', '#EF4444', '#10B981', '#F59E0B'];\n        let allBounds = null;\n\n        routeData.dailyRoutes.forEach((dayRoute, idx) => {\n          // מקור הנקודות: או dayRoute.points או פילטר לפי day מ-routeData.points\n          const dayPoints = (dayRoute.points && dayRoute.points.length)\n            ? dayRoute.points\n            : (routeData.points || []).filter(p => p.day === dayRoute.day);\n\n          if (!dayPoints || dayPoints.length === 0) return;\n\n          const latlngs = dayPoints.map(p => [p.lat, p.lng]);\n\n          // קו למסלול היומי\n          const line = L.polyline(latlngs, {\n            color: colors[idx % colors.length],\n            weight: 4,\n            opacity: 0.9\n          }).addTo(overlayRef.current);\n\n          // סימון התחלה/סיום לכל יום – לפי הבקשה \"Start 1/2\"\n          // תיוג לפי היום האמיתי, ופתיחת popup ל-Start של יום 1\n          const startLabel = `Start ${dayRoute.day ?? (idx + 1)}`;\n          const endLabel   = `End ${dayRoute.day ?? (idx + 1)}`;\n\n          const startMarker = L.marker(latlngs[0], { zIndexOffset: 1000 })\n            .addTo(overlayRef.current)\n            .bindPopup(startLabel);\n\n          // פותחים את ה-popup של יום 1 כדי לוודא שרואים אותו\n          if ((dayRoute.day ?? (idx + 1)) === 1) {\n            startMarker.openPopup();\n          }\n\n          // אם יש חפיפה עם סוף יום אחר, נזיז טיפה את ה-End כדי שלא יכסה\n          function nudge([lat, lng], eastM = 6, northM = -6) {\n            const mPerDegLat = 111320;\n            const mPerDegLng = 111320 * Math.cos((lat * Math.PI) / 180);\n            return [lat + northM / mPerDegLat, lng + eastM / mPerDegLng];\n          }\n\n          if (latlngs.length > 1) {\n            const endPos = nudge(latlngs[latlngs.length - 1], 6, -6); // הזזה קלה\n            L.marker(endPos, { zIndexOffset: 900 })\n              .addTo(overlayRef.current)\n              .bindPopup(endLabel);\n          }\n\n          // איסוף גבולות לכל הימים\n          const b = line.getBounds();\n          allBounds = allBounds ? allBounds.extend(b) : b;\n        });\n\n        if (allBounds) {\n          map.fitBounds(allBounds, { padding: [20, 20] });\n        }\n        return; // סיימנו ציור לפי ימים\n      }\n\n      // --- אם אין dailyRoutes אבל יש geometry – מציירים GeoJSON (קו יחיד) ---\n      if (routeData.geometry) {\n        const geoLayer = L.geoJSON(routeData.geometry, {\n          style: { weight: 4, opacity: 0.9 }\n        }).addTo(overlayRef.current);\n\n        if (showMarkers && routeData.geometry.type === 'LineString' &&\n            Array.isArray(routeData.geometry.coordinates)) {\n          const c = routeData.geometry.coordinates;\n          if (c.length) {\n            L.marker([c[0][1], c[0][0]]).addTo(overlayRef.current).bindPopup('Start');\n            if (c.length > 1) {\n              L.marker([c[c.length - 1][1], c[c.length - 1][0]]).addTo(overlayRef.current).bindPopup('End');\n            }\n          }\n        }\n        map.fitBounds(geoLayer.getBounds(), { padding: [20, 20] });\n        return;\n      }\n\n      // --- fallback: ציור לפי points מקובצים לפי day ---\n      if (routeData.points && routeData.points.length > 0) {\n        const byDay = {};\n        routeData.points.forEach(p => {\n          (byDay[p.day] ||= []).push([p.lat, p.lng]);\n        });\n\n        const colors = ['#3B82F6', '#EF4444', '#10B981', '#F59E0B'];\n        let allBounds = null;\n\n        Object.keys(byDay).forEach((day, i) => {\n          const line = L.polyline(byDay[day], {\n            color: colors[i % colors.length], weight: 4, opacity: 0.9\n          }).addTo(overlayRef.current);\n\n          L.marker(byDay[day][0]).addTo(overlayRef.current).bindPopup(`Start ${i + 1}`);\n          if (byDay[day].length > 1) {\n            L.marker(byDay[day][byDay[day].length - 1]).addTo(overlayRef.current).bindPopup(`End ${i + 1}`);\n          }\n\n          const b = line.getBounds();\n          allBounds = allBounds ? allBounds.extend(b) : b;\n        });\n\n        if (allBounds) map.fitBounds(allBounds, { padding: [20, 20] });\n        return;\n      }\n    }\n\n  \n  \n      // אם אין routeData.points או showRoute=false – רק סמן במרכז\n      if (showMarkers) {\n        L.marker(center).addTo(overlayRef.current).bindPopup('Location').openPopup();\n      }\n    } catch (error) {\n      console.error('Error updating map:', error);\n    }\n  }, [routeData, showMarkers, showRoute, center]);\n  \n\n  return (\n    <div \n      ref={mapRef} \n      style={{ height, width: '100%', minHeight: '200px' }}\n      className=\"rounded-lg overflow-hidden\"\n    />\n  );\n};\n\nexport default RouteMap; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}